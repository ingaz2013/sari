{
  "query": "CREATE TABLE IF NOT EXISTS `service_packages` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `service_ids` text,\n  `original_price` int,\n  `package_price` int,\n  `discount_percentage` int,\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `staff_members` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `phone` varchar(20),\n  `email` varchar(255),\n  `role` varchar(100),\n  `working_hours` text,\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `google_calendar_id` varchar(255),\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `appointments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `customer_phone` varchar(20) NOT NULL,\n  `customer_name` varchar(255),\n  `service_id` int NOT NULL,\n  `staff_id` int,\n  `appointment_date` timestamp NOT NULL,\n  `start_time` varchar(5) NOT NULL,\n  `end_time` varchar(5) NOT NULL,\n  `status` enum('pending','confirmed','cancelled','completed','no_show') NOT NULL DEFAULT 'pending',\n  `google_event_id` varchar(255),\n  `reminder_24h_sent` tinyint NOT NULL DEFAULT 0,\n  `reminder_1h_sent` tinyint NOT NULL DEFAULT 0,\n  `notes` text,\n  `cancellation_reason` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`service_id`) REFERENCES `services`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`staff_id`) REFERENCES `staff_members`(`id`) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS `service_reviews` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `service_id` int NOT NULL,\n  `customer_phone` varchar(20) NOT NULL,\n  `customer_name` varchar(255),\n  `rating` int NOT NULL,\n  `comment` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`service_id`) REFERENCES `services`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `setup_wizard_progress` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL UNIQUE,\n  `current_step` int NOT NULL DEFAULT 1,\n  `completed_steps` text,\n  `wizard_data` text,\n  `is_completed` tinyint NOT NULL DEFAULT 0,\n  `completed_at` timestamp NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `google_integrations` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `integration_type` enum('calendar','sheets') NOT NULL,\n  `credentials` text,\n  `calendar_id` varchar(255),\n  `sheet_id` varchar(255),\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `last_sync` timestamp NULL,\n  `settings` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3GAtigc1mT3FupY.root --database aEd97Sv38TzpxF76sMza4k --execute CREATE TABLE IF NOT EXISTS `service_packages` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `service_ids` text,\n  `original_price` int,\n  `package_price` int,\n  `discount_percentage` int,\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `staff_members` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `phone` varchar(20),\n  `email` varchar(255),\n  `role` varchar(100),\n  `working_hours` text,\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `google_calendar_id` varchar(255),\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `appointments` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `customer_phone` varchar(20) NOT NULL,\n  `customer_name` varchar(255),\n  `service_id` int NOT NULL,\n  `staff_id` int,\n  `appointment_date` timestamp NOT NULL,\n  `start_time` varchar(5) NOT NULL,\n  `end_time` varchar(5) NOT NULL,\n  `status` enum('pending','confirmed','cancelled','completed','no_show') NOT NULL DEFAULT 'pending',\n  `google_event_id` varchar(255),\n  `reminder_24h_sent` tinyint NOT NULL DEFAULT 0,\n  `reminder_1h_sent` tinyint NOT NULL DEFAULT 0,\n  `notes` text,\n  `cancellation_reason` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`service_id`) REFERENCES `services`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`staff_id`) REFERENCES `staff_members`(`id`) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS `service_reviews` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `service_id` int NOT NULL,\n  `customer_phone` varchar(20) NOT NULL,\n  `customer_name` varchar(255),\n  `rating` int NOT NULL,\n  `comment` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`service_id`) REFERENCES `services`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `setup_wizard_progress` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL UNIQUE,\n  `current_step` int NOT NULL DEFAULT 1,\n  `completed_steps` text,\n  `wizard_data` text,\n  `is_completed` tinyint NOT NULL DEFAULT 0,\n  `completed_at` timestamp NULL,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `google_integrations` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `merchant_id` int NOT NULL,\n  `integration_type` enum('calendar','sheets') NOT NULL,\n  `credentials` text,\n  `calendar_id` varchar(255),\n  `sheet_id` varchar(255),\n  `is_active` tinyint NOT NULL DEFAULT 1,\n  `last_sync` timestamp NULL,\n  `settings` text,\n  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (`merchant_id`) REFERENCES `merchants`(`id`) ON DELETE CASCADE\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 4240
}